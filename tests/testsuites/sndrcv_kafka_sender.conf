$IncludeConfig diag-common2.conf

module(load="../plugins/omkafka/.libs/omkafka")
module(load="../plugins/imtcp/.libs/imtcp")
input(type="imtcp" port="13514")	/* this port for tcpflood! */

template(name="outfmt" type="string" string="%msg%\n")

action(	name="kafka-fwd" 
	type="omkafka" 
	topic="static" 
	broker="localhost:29092" 
	template="outfmt" 
	confParam=[	"compression.codec=snappy",
			"socket.timeout.ms=1000",
			"socket.keepalive.enable=true",
			"reconnect.backoff.jitter.ms=1000",
			"queue.buffering.max.messages=10000",
			"message.send.max.retries=2"]
	topicConfParam=["message.timeout.ms=10000"]
	partitions.auto="on"
	action.resumeInterval="5"
	action.resumeRetryCount="5"
	queue.saveonshutdown="on"
	)
