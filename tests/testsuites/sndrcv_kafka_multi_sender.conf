$IncludeConfig diag-common2.conf

module(load="../plugins/omkafka/.libs/omkafka")
module(load="../plugins/imtcp/.libs/imtcp")
input(type="imtcp" port="13514" Ruleset="omkafka")	/* this port for tcpflood! */

template(name="outfmt" type="string" string="%msg%\n")

ruleset(name="omkafka") {
	action(name="kafka-fwd" type="omkafka" topic="static" broker=["localhost:9092", "localhost:9093", "localhost:9094"] template="outfmt" partitions.auto="on")
}
ruleset(name="omkafka1") {
	action(name="kafka-fwd" type="omkafka" topic="static" broker="localhost:9092" template="outfmt" partitions.auto="on")
}
ruleset(name="omkafka2") {
	action(name="kafka-fwd" type="omkafka" topic="static" broker="localhost:9093" template="outfmt" partitions.auto="on")
}
ruleset(name="omkafka3") {
	action(name="kafka-fwd" type="omkafka" topic="static" broker="localhost:9094" template="outfmt" partitions.auto="on")
}
